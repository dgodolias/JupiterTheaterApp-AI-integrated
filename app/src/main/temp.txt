  Conversation State: 
  INITIAL
  Starting to resolve node references. Node map size: 18
  After resolving references, root node has 5 children
  Conversation tree loaded successfully
  Attempting to connect to 192.168.1.18:65432
  Loaded sample_shows.json into table 'shows'
  Loaded sample_bookings.json into table 'bookings'
  Loaded sample_discounts.json into table 'discounts'
  Loaded sample_reviews.json into table 'reviews'
  Database initialized with 4 tables
  Table 'shows' loaded with 8 records
  Table 'discounts' loaded with 10 records
  Table 'reviews' loaded with 5 records
  Table 'bookings' loaded with 4 records
  Getting initial message from root node
  Root node exists, checking messages
  Current leftover message: null
  DEBUG: Found <leftover> placeholder in root node message1: <leftover>
  DEBUG: Retrieved leftover message from manager: null
  DEBUG: No leftover message available, returning null to show only message2
  Root node message1 (after processing): null
  Root node message2: Γεια σας! Καλωσήρθατε στο Θέατρο Jupiter.Πώς μπορώ να σας βοηθήσω;
  Message1 is null or empty, skipping
  Processing message2
  Added message2 to combined message
  Final initial message: Γεια σας! Καλωσήρθατε στο Θέατρο Jupiter.Πώς μπορώ να σας βοηθήσω;
  Connected to server successfully
  Accessing hidden method Landroid/view/View;->getViewRootImpl()Landroid/view/ViewRootImpl; (greylist, reflection, allowed)
  Accessing hidden field Landroid/view/View$AttachInfo;->mVisibleInsets:Landroid/graphics/Rect; (greylist, reflection, allowed)
  Accessing hidden field Landroid/view/ViewRootImpl;->mAttachInfo:Landroid/view/View$AttachInfo; (greylist, reflection, allowed)
  eglMakeCurrent: 0xd5ccb840: ver 2 0 (tinfo 0xe14d1370)
  Installing profile for com.example.jupitertheaterapp
  Flattened final assist data: 1392 bytes, containing 1 windows, 7 views
  Current Node: ChatbotNode{
    id='root',
    category='-',
    type='CATEGORISE',
    message1='<leftover>',
    message2='Γεια σας! Καλωσήρθατε στο Θέατρο Jupiter.Πώς μπορώ να σας βοηθήσω;',
    systemMessage=SystemMessage{category='-', details=null, error='null', type=1},
    userMessage=null,
    content='',
    fallback='Δεν είμαι σίγουρος ότι καταλαβαίνω.<sep>Μπορώ να σας βοηθήσω με κρατήσεις, ακυρώσεις, πληροφορίες, αξιολογήσεις ή προσφορές για το θέατρό μας;',
    childrenCount=5,
    parent=null,
    pendingChildIds=[],
    msgTemplate=null
  }
  Getting response for user message: ψ
  CREATED CATEGORISE REQUEST: {"type":"CATEGORISE","category":"-","message":"ψ"}
  Current node: ChatbotNode{
    id='root',
    category='-',
    type='CATEGORISE',
    message1='<leftover>',
    message2='Γεια σας! Καλωσήρθατε στο Θέατρο Jupiter.Πώς μπορώ να σας βοηθήσω;',
    systemMessage=SystemMessage{category='-', details=null, error='null', type=1},
    userMessage=UserMessage{category='-'type=0, message='ψ'},
    content='',
    fallback='Δεν είμαι σίγουρος ότι καταλαβαίνω.<sep>Μπορώ να σας βοηθήσω με κρατήσεις, ακυρώσεις, πληροφορίες, αξιολογήσεις ή προσφορές για το θέατρό μας;',
    childrenCount=5,
    parent=null,
    pendingChildIds=[],
    msgTemplate=null
  }
  CREATED CATEGORISE REQUEST: {"type":"CATEGORISE","category":"-","message":"ψ"}
  Sent to server: {"type":"CATEGORISE","category":"-","message":"ψ"}
  JSON SENT TO SERVER: {"type":"CATEGORISE","category":"-","message":"ψ"}
  Received from server: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": null, "error": null}
  JSON RECEIVED FROM SERVER: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": null, "error": null}
  JSON FIELDS: java.util.LinkedHashMap$LinkedKeyIterator@201d4b0
  CATEGORY FROM SERVER: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Handling conversation turn for node: root
  DEBUG: Processing JSON response to populate template
  DEBUG: Created new template for category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  Details is null, skipping template population
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 4
  DEBUG: Missing fields in Greek: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία, ημερομηνία
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: root, Category: -
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία, ημερομηνία
  No details in JSON response, skipping template application
  DEBUG: First process result: true
  DEBUG: Handling node transition for node root
  DEBUG: Current state: INITIAL
  DEBUG: Setting state to INITIAL for root node
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  DEBUG: Found <leftover> placeholder in root node message1: <leftover>
  DEBUG: Retrieved leftover message from manager: null
  DEBUG: No leftover message available, returning null to show only message2
  Initial JSON processing complete, template populated
  Navigation debug - Original user input: 'ψ', Server category: 'ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ'
  DEBUG: Choosing next node with actual user input: ψ
  DEBUG: Stored user message: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Current node ID: root, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Available children count: 5
  DEBUG: Available child nodes for matching:
  DEBUG:   - ID: plirofories, Category: ΠΛΗΡΟΦΟΡΙΕΣ
  DEBUG:   - ID: kratisi, Category: ΚΡΑΤΗΣΗ
  DEBUG:   - ID: akyrosi, Category: ΑΚΥΡΩΣΗ
  DEBUG:   - ID: axiologiseis_sxolia, Category: ΑΞΙΟΛΟΓΗΣΕΙΣ & ΣΧΟΛΙΑ
  DEBUG:   - ID: prosfores_ekptoseis, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Path length: 1
  DEBUG: Path from root to current node: 
  DEBUG:   - root (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG: isConfirmation: false, isRejection: false
  DEBUG: At root node, looking for category match
  DEBUG: Found child with matching category: prosfores_ekptoseis
  DEBUG: Selected next node: prosfores_ekptoseis, handling state transition
  DEBUG: Both nodes have templates, attempting merge from root to prosfores_ekptoseis
  DEBUG: Merging template data from DiscountTemplate
  DEBUG: Merge successful: true
  DEBUG: Handling node transition for node prosfores_ekptoseis
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  Navigation successful - Moving from 'root' to 'prosfores_ekptoseis'
  DEBUG: Handling conversation turn for node: prosfores_ekptoseis
  DEBUG: Processing JSON response to populate template
  Details is null, skipping template population
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 4
  DEBUG: Missing fields in Greek: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία, ημερομηνία
  DEBUG: For ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ category - Template has NO information available
  DEBUG: Should navigate to: discount_none
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: prosfores_ekptoseis, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία, ημερομηνία
  No details in JSON response, skipping template application
  DEBUG: First process result: true
  DEBUG: Handling node transition for node prosfores_ekptoseis
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  Conversation turn processed for node: prosfores_ekptoseis
  Current state: INITIAL
  Using system message from node: prosfores_ekptoseis
  Combined message: Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;
  Current Node: ChatbotNode{
    id='prosfores_ekptoseis',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;',
    message2='Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details=null, error='null', type=2},
    userMessage=null,
    content='',
    fallback='Οι προσφορές μας ανανεώνονται τακτικά. Μπορείτε να ενημερωθείτε για τις τρέχουσες εκπτώσεις στην ιστοσελίδα μας ή να μας πείτε για ποιες κατηγορίες εκπτώσεων ενδιαφέρεστε.',
    childrenCount=2,
    parent=root,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[], numberOfPeople=[], age=[], date=[], possibleAgeCategories=[]}
  }
  Current Node: ChatbotNode{
    id='prosfores_ekptoseis',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;',
    message2='Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details=null, error='null', type=2},
    userMessage=null,
    content='',
    fallback='Οι προσφορές μας ανανεώνονται τακτικά. Μπορείτε να ενημερωθείτε για τις τρέχουσες εκπτώσεις στην ιστοσελίδα μας ή να μας πείτε για ποιες κατηγορίες εκπτώσεων ενδιαφέρεστε.',
    childrenCount=2,
    parent=root,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[], numberOfPeople=[], age=[], date=[], possibleAgeCategories=[]}
  }
  Getting response for user message: β
  CREATED EXTRACT REQUEST: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"β"}
  CATEGORY FOR EXTRACT: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  Current node: ChatbotNode{
    id='prosfores_ekptoseis',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;',
    message2='Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details=null, error='null', type=2},
    userMessage=UserMessage{category='-'type=0, message='β'},
    content='',
    fallback='Οι προσφορές μας ανανεώνονται τακτικά. Μπορείτε να ενημερωθείτε για τις τρέχουσες εκπτώσεις στην ιστοσελίδα μας ή να μας πείτε για ποιες κατηγορίες εκπτώσεων ενδιαφέρεστε.',
    childrenCount=2,
    parent=root,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[], numberOfPeople=[], age=[], date=[], possibleAgeCategories=[]}
  }
  CREATED EXTRACT REQUEST: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"β"}
  CATEGORY FOR EXTRACT: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  Sent to server: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"β"}
  JSON SENT TO SERVER: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"β"}
  Received from server: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": {"show_name": {"value": [], "pvalues": ["Ο Μάγος του Οζ", "Η Παναγία των Παρισίων", "Το Τέρας της Λίμνης", "Η Καλύβα του Μπαρμπα-Θωμά", "Το Μυστικό της Αλίκης", "Ο Θησαυρός της Βαγδάτης", "Η Κωμωδία των Παρεξηγήσεων", "Ο Βυσσινόκηπος"]}, "no_of_people": {"value": [], "pvalues": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, "age": {"value": [], "pvalues": ["< 18", "> 18", "> 65"]}, "date": {"value": ["Τρίτη"], "pvalues": ["Δευτέρα", "Τρίτη", "Τετάρτη", "Πέμπτη", "Παρασκευή", "Σάββατο", "Κυριακή"]}, "discount": {"value": "", "pvalues": ["5%", "10%", "15%", "20%", "25%", "30%", "35%", "40%", "50%"]}, "code": {"value": "", "pvalues": []}}, "error": null}
  JSON RECEIVED FROM SERVER: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": {"show_name": {"value": [], "pvalues": ["Ο Μάγος του Οζ", "Η Παναγία των Παρισίων", "Το Τέρας της Λίμνης", "Η Καλύβα του Μπαρμπα-Θωμά", "Το Μυστικό της Αλίκης", "Ο Θησαυρός της Βαγδάτης", "Η Κωμωδία των Παρεξηγήσεων", "Ο Βυσσινόκηπος"]}, "no_of_people": {"value": [], "pvalues": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, "age": {"value": [], "pvalues": ["< 18", "> 18", "> 65"]}, "date": {"value": ["Τρίτη"], "pvalues": ["Δευτέρα", "Τρίτη", "Τετάρτη", "Πέμπτη", "Παρασκευή", "Σάββατο", "Κυριακή"]}, "discount": {"value": "", "pvalues": ["5%", "10%", "15%", "20%", "25%", "30%", "35%", "40%", "50%"]}, "code": {"value": "", "pvalues": []}}, "error": null}
  JSON FIELDS: java.util.LinkedHashMap$LinkedKeyIterator@6f1976a
  CATEGORY FROM SERVER: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Handling conversation turn for node: prosfores_ekptoseis
  DEBUG: Processing JSON response to populate template
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 3
  DEBUG: Missing fields in Greek: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία
  DEBUG: For ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ category - Template has SOME information available
  DEBUG: Should navigate to: discount_some
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: prosfores_ekptoseis, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία
  DEBUG: Template populated from JSON - Type: DiscountTemplate, Missing fields count: 3
  DEBUG: Template still has missing fields: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία
  TEMPLATE APPLIED: Πείτε μας τι σας ενδιαφέρει οσον αφορα την ενότητα των προσφορών και των εκπτώσεων;
  DEBUG: First process result: true
  DEBUG: Handling node transition for node prosfores_ekptoseis
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  Initial JSON processing complete, template populated
  Navigation debug - Original user input: 'β', Server category: 'ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ'
  DEBUG: Choosing next node with actual user input: β
  DEBUG: Stored user message: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Current node ID: prosfores_ekptoseis, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Available children count: 2
  DEBUG: Available child nodes for matching:
  DEBUG:   - ID: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG:   - ID: discount_incomplete, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Path length: 2
  DEBUG: Path from root to current node: 
  DEBUG:   - root (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG:   - prosfores_ekptoseis (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG: isConfirmation: false, isRejection: false
  DEBUG: At category node prosfores_ekptoseis, checking template completeness
  DEBUG: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ - Has at least one field populated: true
  DEBUG: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ has some information available - using discount_some
  DEBUG: Template completeness: true
  DEBUG: Template class: DiscountTemplate, Missing fields count: 3, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Missing fields: [show_name, no_of_people, age]
  DEBUG: Template completeness check result: true
  DEBUG: Current template state:
  DEBUG:   - Class: DiscountTemplate
  DEBUG:   - Missing fields: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία
  DEBUG:   - Has complete info: true
  DEBUG: For ΠΛΗΡΟΦΟΡΙΕΣ category - Using 'cofirmation' pattern for available info, 'incomplete' for no info
  DEBUG: Template state: hasCompleteInfo=true, Will search for child with 'cofirmation' in ID
  DEBUG: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ - DiscountTemplate content:
  DEBUG:   showName: ''
  DEBUG:   numberOfPeople: ''
  DEBUG:   age: ''
  DEBUG:   date: 'Τρίτη'
  DEBUG: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ - Has at least one field populated: true
  DEBUG: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ has some information available - using discount_some
  DEBUG: Looking for child with pattern: cofirmation based on completeness check: true
  DEBUG: Available children to match pattern:
  DEBUG:   - Child ID: discount_confirmation, matches pattern? false
  DEBUG:   - Child ID: discount_incomplete, matches pattern? false
  DEBUG: No child with pattern 'cofirmation' was found!
  DEBUG: Found child with matching category: discount_confirmation
  DEBUG: Selected next node: discount_confirmation, handling state transition
  DEBUG: Both nodes have templates, attempting merge from prosfores_ekptoseis to discount_confirmation
  DEBUG: Merging template data from DiscountTemplate
  DEBUG: Merge successful: true
  DEBUG: Handling node transition for node discount_confirmation
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  Navigation successful - Moving from 'prosfores_ekptoseis' to 'discount_confirmation'
  DEBUG: Handling conversation turn for node: discount_confirmation
  DEBUG: Processing JSON response to populate template
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 3
  DEBUG: Missing fields in Greek: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία
  DEBUG: For ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ category - Template has SOME information available
  DEBUG: Should navigate to: discount_some
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία
  DEBUG: Template populated from JSON - Type: DiscountTemplate, Missing fields count: 3
  DEBUG: Template still has missing fields: όνομα παράστασης, αριθμός ατόμων, ηλικιακή κατηγορία
  TEMPLATE APPLIED: ημερομηνία: Τρίτη, <sep> σωστα;
  DEBUG: First process result: true
  DEBUG: Handling node transition for node discount_confirmation
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  Conversation turn processed for node: discount_confirmation
  Current state: INITIAL
  Using system message from node: discount_confirmation
  Combined message: Θα θελατε να μάθετ  ημερομηνία: Τρίτη, <sep> σωστα;
  Current Node: ChatbotNode{
    id='discount_confirmation',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Θα θελατε να μάθετε περισσότερα για τις εκπτώσεις που ισχύουν για:',
    message2='ημερομηνία: Τρίτη, <sep> σωστα;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details={"show_name":{"value":[],"pvalues":["Ο Μάγος του Οζ","Η Παναγία των Παρισίων","Το Τέρας της Λίμνης","Η Καλύβα του Μπαρμπα-Θωμά","Το Μυστικό της Αλίκης","Ο Θησαυρός της Βαγδάτης","Η Κωμωδία των Παρεξηγήσεων","Ο Βυσσινόκηπος"]},"no_of_people":{"value":[],"pvalues":[1,2,3,4,5,6,7,8,9,10]},"age":{"value":[],"pvalues":["< 18","> 18","> 65"]},"date":{"value":["Τρίτη"],"pvalues":["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"]},"discount":{"value":"","pvalues":["5%","10%","15%","20%","25%","30%","35%","40%","50%"]},"code":{"value":"","pvalues":[]}}, error='null', type=2},
    userMessage=null,
    content='',
    fallback='Οι προσφορές που αναφέρθηκαν ισχύουν με την επίδειξη κατάλληλης ταυτότητας κατά την είσοδο.',
    childrenCount=1,
    parent=prosfores_ekptoseis,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[], numberOfPeople=[], age=[], date=[Τρίτη], possibleAgeCategories=[< 18, > 18, > 65]}
  }
  Current Node: ChatbotNode{
    id='discount_confirmation',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Θα θελατε να μάθετε περισσότερα για τις εκπτώσεις που ισχύουν για:',
    message2='ημερομηνία: Τρίτη, <sep> σωστα;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details={"show_name":{"value":[],"pvalues":["Ο Μάγος του Οζ","Η Παναγία των Παρισίων","Το Τέρας της Λίμνης","Η Καλύβα του Μπαρμπα-Θωμά","Το Μυστικό της Αλίκης","Ο Θησαυρός της Βαγδάτης","Η Κωμωδία των Παρεξηγήσεων","Ο Βυσσινόκηπος"]},"no_of_people":{"value":[],"pvalues":[1,2,3,4,5,6,7,8,9,10]},"age":{"value":[],"pvalues":["< 18","> 18","> 65"]},"date":{"value":["Τρίτη"],"pvalues":["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"]},"discount":{"value":"","pvalues":["5%","10%","15%","20%","25%","30%","35%","40%","50%"]},"code":{"value":"","pvalues":[]}}, error='null', type=2},
    userMessage=null,
    content='',
    fallback='Οι προσφορές που αναφέρθηκαν ισχύουν με την επίδειξη κατάλληλης ταυτότητας κατά την είσοδο.',
    childrenCount=1,
    parent=prosfores_ekptoseis,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[], numberOfPeople=[], age=[], date=[Τρίτη], possibleAgeCategories=[< 18, > 18, > 65]}
  }
  Getting response for user message: ξ
  CREATED EXTRACT REQUEST: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ξ"}
  CATEGORY FOR EXTRACT: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  Current node: ChatbotNode{
    id='discount_confirmation',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Θα θελατε να μάθετε περισσότερα για τις εκπτώσεις που ισχύουν για:',
    message2='ημερομηνία: Τρίτη, <sep> σωστα;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details={"show_name":{"value":[],"pvalues":["Ο Μάγος του Οζ","Η Παναγία των Παρισίων","Το Τέρας της Λίμνης","Η Καλύβα του Μπαρμπα-Θωμά","Το Μυστικό της Αλίκης","Ο Θησαυρός της Βαγδάτης","Η Κωμωδία των Παρεξηγήσεων","Ο Βυσσινόκηπος"]},"no_of_people":{"value":[],"pvalues":[1,2,3,4,5,6,7,8,9,10]},"age":{"value":[],"pvalues":["< 18","> 18","> 65"]},"date":{"value":["Τρίτη"],"pvalues":["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"]},"discount":{"value":"","pvalues":["5%","10%","15%","20%","25%","30%","35%","40%","50%"]},"code":{"value":"","pvalues":[]}}, error='null', type=2},
    userMessage=UserMessage{category='-'type=0, message='ξ'},
    content='',
    fallback='Οι προσφορές που αναφέρθηκαν ισχύουν με την επίδειξη κατάλληλης ταυτότητας κατά την είσοδο.',
    childrenCount=1,
    parent=prosfores_ekptoseis,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[], numberOfPeople=[], age=[], date=[Τρίτη], possibleAgeCategories=[< 18, > 18, > 65]}
  }
  CREATED EXTRACT REQUEST: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ξ"}
  CATEGORY FOR EXTRACT: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  Sent to server: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ξ"}
  JSON SENT TO SERVER: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ξ"}
  Received from server: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": {"show_name": {"value": "Ο Μάγος του Οζ", "pvalues": ["Ο Μάγος του Οζ", "Η Παναγία των Παρισίων", "Το Τέρας της Λίμνης", "Η Καλύβα του Μπαρμπα-Θωμά", "Το Μυστικό της Αλίκης", "Ο Θησαυρός της Βαγδάτης", "Η Κωμωδία των Παρεξηγήσεων", "Ο Βυσσινόκηπος"]}, "no_of_people": {"value": "1", "pvalues": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, "age": {"value": "< 18", "pvalues": ["< 18", "> 18", "> 65"]}, "date": {"value": "Δευτέρα", "pvalues": ["Δευτέρα", "Τρίτη", "Τετάρτη", "Πέμπτη", "Παρασκευή", "Σάββατο", "Κυριακή"]}, "discount": {"value": "-15%", "pvalues": ["-5%", "-10%", "-15%", "-20%", "-25%", "-30%", "-35%", "-40%", "-45%", "-50%"]}, "code": {"value": "A5T7G"}}, "error": null}
  JSON RECEIVED FROM SERVER: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": {"show_name": {"value": "Ο Μάγος του Οζ", "pvalues": ["Ο Μάγος του Οζ", "Η Παναγία των Παρισίων", "Το Τέρας της Λίμνης", "Η Καλύβα του Μπαρμπα-Θωμά", "Το Μυστικό της Αλίκης", "Ο Θησαυρός της Βαγδάτης", "Η Κωμωδία των Παρεξηγήσεων", "Ο Βυσσινόκηπος"]}, "no_of_people": {"value": "1", "pvalues": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, "age": {"value": "< 18", "pvalues": ["< 18", "> 18", "> 65"]}, "date": {"value": "Δευτέρα", "pvalues": ["Δευτέρα", "Τρίτη", "Τετάρτη", "Πέμπτη", "Παρασκευή", "Σάββατο", "Κυριακή"]}, "discount": {"value": "-15%", "pvalues": ["-5%", "-10%", "-15%", "-20%", "-25%", "-30%", "-35%", "-40%", "-45%", "-50%"]}, "code": {"value": "A5T7G"}}, "error": null}
  JSON FIELDS: java.util.LinkedHashMap$LinkedKeyIterator@9970d41
  CATEGORY FROM SERVER: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Handling conversation turn for node: discount_confirmation
  DEBUG: Processing JSON response to populate template
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 0
  DEBUG: Template is complete - All fields populated
  DEBUG: For ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ category - Template has SOME information available
  DEBUG: Should navigate to: discount_some
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: 
  DEBUG: Template populated from JSON - Type: DiscountTemplate, Missing fields count: 0
  DEBUG: Template is complete! All fields populated successfully.
  TEMPLATE APPLIED: ημερομηνία: Τρίτη, <sep> σωστα;
  DEBUG: First process result: true
  DEBUG: Handling node transition for node discount_confirmation
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  Initial JSON processing complete, template populated
  Navigation debug - Original user input: 'ξ', Server category: 'ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ'
  DEBUG: Choosing next node with actual user input: ξ
  DEBUG: Stored user message: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Current node ID: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Available children count: 1
  DEBUG: Available child nodes for matching:
  DEBUG:   - ID: discount_complete, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Path length: 3
  DEBUG: Path from root to current node: 
  DEBUG:   - root (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG:   - prosfores_ekptoseis (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG:   - discount_confirmation (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG: isConfirmation: false, isRejection: false
  DEBUG: At confirmation node: discount_confirmation
  DEBUG: At confirmation node with OTHER input - staying at same node
  Navigation successful - Moving from 'discount_confirmation' to 'discount_confirmation'
  DEBUG: Handling conversation turn for node: discount_confirmation
  DEBUG: Processing JSON response to populate template
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 0
  DEBUG: Template is complete - All fields populated
  DEBUG: For ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ category - Template has SOME information available
  DEBUG: Should navigate to: discount_some
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: 
  DEBUG: Template populated from JSON - Type: DiscountTemplate, Missing fields count: 0
  DEBUG: Template is complete! All fields populated successfully.
  TEMPLATE APPLIED: ημερομηνία: Τρίτη, <sep> σωστα;
  DEBUG: First process result: true
  DEBUG: Handling node transition for node discount_confirmation
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  Conversation turn processed for node: discount_confirmation
  Current state: INITIAL
  Using system message from node: discount_confirmation
  Combined message: Θα θελατε να μάθετ  ημερομηνία: Τρίτη, <sep> σωστα;
  Current Node: ChatbotNode{
    id='discount_confirmation',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Θα θελατε να μάθετε περισσότερα για τις εκπτώσεις που ισχύουν για:',
    message2='ημερομηνία: Τρίτη, <sep> σωστα;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details={"show_name":{"value":"Ο Μάγος του Οζ","pvalues":["Ο Μάγος του Οζ","Η Παναγία των Παρισίων","Το Τέρας της Λίμνης","Η Καλύβα του Μπαρμπα-Θωμά","Το Μυστικό της Αλίκης","Ο Θησαυρός της Βαγδάτης","Η Κωμωδία των Παρεξηγήσεων","Ο Βυσσινόκηπος"]},"no_of_people":{"value":"1","pvalues":[1,2,3,4,5,6,7,8,9,10]},"age":{"value":"< 18","pvalues":["< 18","> 18","> 65"]},"date":{"value":"Δευτέρα","pvalues":["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"]},"discount":{"value":"-15%","pvalues":["-5%","-10%","-15%","-20%","-25%","-30%","-35%","-40%","-45%","-50%"]},"code":{"value":"A5T7G"}}, error='null', type=2},
    userMessage=UserMessage{category='-'type=0, message='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ'},
    content='',
    fallback='Οι προσφορές που αναφέρθηκαν ισχύουν με την επίδειξη κατάλληλης ταυτότητας κατά την είσοδο.',
    childrenCount=1,
    parent=prosfores_ekptoseis,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[Ο Μάγος του Οζ], numberOfPeople=[1], age=[< 18], date=[Δευτέρα], possibleAgeCategories=[< 18, > 18, > 65]}
  }
  Current Node: ChatbotNode{
    id='discount_confirmation',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Θα θελατε να μάθετε περισσότερα για τις εκπτώσεις που ισχύουν για:',
    message2='ημερομηνία: Τρίτη, <sep> σωστα;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details={"show_name":{"value":"Ο Μάγος του Οζ","pvalues":["Ο Μάγος του Οζ","Η Παναγία των Παρισίων","Το Τέρας της Λίμνης","Η Καλύβα του Μπαρμπα-Θωμά","Το Μυστικό της Αλίκης","Ο Θησαυρός της Βαγδάτης","Η Κωμωδία των Παρεξηγήσεων","Ο Βυσσινόκηπος"]},"no_of_people":{"value":"1","pvalues":[1,2,3,4,5,6,7,8,9,10]},"age":{"value":"< 18","pvalues":["< 18","> 18","> 65"]},"date":{"value":"Δευτέρα","pvalues":["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"]},"discount":{"value":"-15%","pvalues":["-5%","-10%","-15%","-20%","-25%","-30%","-35%","-40%","-45%","-50%"]},"code":{"value":"A5T7G"}}, error='null', type=2},
    userMessage=UserMessage{category='-'type=0, message='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ'},
    content='',
    fallback='Οι προσφορές που αναφέρθηκαν ισχύουν με την επίδειξη κατάλληλης ταυτότητας κατά την είσοδο.',
    childrenCount=1,
    parent=prosfores_ekptoseis,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[Ο Μάγος του Οζ], numberOfPeople=[1], age=[< 18], date=[Δευτέρα], possibleAgeCategories=[< 18, > 18, > 65]}
  }
  Getting response for user message: ναι
  User confirmed at confirmation node - navigating to root without server request
  Performing database operation for node: discount_confirmation
  No database operation needed for node: discount_confirmation
  Database operation completed successfully for discount_confirmation
  === DATABASE STATE ===
  Table 'shows': 8 records
  Table 'discounts': 10 records
  Table 'reviews': 5 records
  Table 'bookings': 4 records
  =====================
  DEBUG: Choosing next node with actual user input: ναι
  DEBUG: Stored user message: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Current node ID: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Available children count: 1
  DEBUG: Available child nodes for matching:
  DEBUG:   - ID: discount_complete, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Path length: 3
  DEBUG: Path from root to current node: 
  DEBUG:   - root (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG:   - prosfores_ekptoseis (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG:   - discount_confirmation (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG: isConfirmation: true, isRejection: false
  DEBUG: At confirmation node: discount_confirmation
  DEBUG: At confirmation node with YES - going to root
  DEBUG: Found child with matching category: discount_complete
  DEBUG: Selected next node: discount_complete, handling state transition
  DEBUG: Both nodes have templates, attempting merge from discount_confirmation to discount_complete
  DEBUG: Merging template data from DiscountTemplate
  DEBUG: Merge successful: true
  DEBUG: Handling node transition for node discount_complete
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  Chosen next node after confirmation: discount_complete
  Next node is not root or is null - continuing with normal flow
  CREATED EXTRACT REQUEST: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ναι"}
  CATEGORY FOR EXTRACT: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  Current node: ChatbotNode{
    id='discount_confirmation',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Θα θελατε να μάθετε περισσότερα για τις εκπτώσεις που ισχύουν για:',
    message2='ημερομηνία: Τρίτη, <sep> σωστα;',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details={"show_name":{"value":"Ο Μάγος του Οζ","pvalues":["Ο Μάγος του Οζ","Η Παναγία των Παρισίων","Το Τέρας της Λίμνης","Η Καλύβα του Μπαρμπα-Θωμά","Το Μυστικό της Αλίκης","Ο Θησαυρός της Βαγδάτης","Η Κωμωδία των Παρεξηγήσεων","Ο Βυσσινόκηπος"]},"no_of_people":{"value":"1","pvalues":[1,2,3,4,5,6,7,8,9,10]},"age":{"value":"< 18","pvalues":["< 18","> 18","> 65"]},"date":{"value":"Δευτέρα","pvalues":["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"]},"discount":{"value":"-15%","pvalues":["-5%","-10%","-15%","-20%","-25%","-30%","-35%","-40%","-45%","-50%"]},"code":{"value":"A5T7G"}}, error='null', type=2},
    userMessage=UserMessage{category='-'type=0, message='ναι'},
    content='',
    fallback='Οι προσφορές που αναφέρθηκαν ισχύουν με την επίδειξη κατάλληλης ταυτότητας κατά την είσοδο.',
    childrenCount=1,
    parent=prosfores_ekptoseis,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[Ο Μάγος του Οζ], numberOfPeople=[1], age=[< 18], date=[Δευτέρα], possibleAgeCategories=[< 18, > 18, > 65]}
  }
  CREATED EXTRACT REQUEST: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ναι"}
  CATEGORY FOR EXTRACT: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  Sent to server: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ναι"}
  JSON SENT TO SERVER: {"type":"EXTRACT","category":"ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ","message":"ναι"}
  Received from server: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": {"show_name": {"value": [], "pvalues": ["Ο Μάγος του Οζ", "Η Παναγία των Παρισίων", "Το Τέρας της Λίμνης", "Η Καλύβα του Μπαρμπα-Θωμά", "Το Μυστικό της Αλίκης", "Ο Θησαυρός της Βαγδάτης", "Η Κωμωδία των Παρεξηγήσεων", "Ο Βυσσινόκηπος"]}, "no_of_people": {"value": [], "pvalues": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, "age": {"value": [], "pvalues": ["< 18", "> 18", "> 65"]}, "date": {"value": ["Τρίτη"], "pvalues": ["Δευτέρα", "Τρίτη", "Τετάρτη", "Πέμπτη", "Παρασκευή", "Σάββατο", "Κυριακή"]}, "discount": {"value": "", "pvalues": ["5%", "10%", "15%", "20%", "25%", "30%", "35%", "40%", "50%"]}, "code": {"value": "", "pvalues": []}}, "error": null}
  JSON RECEIVED FROM SERVER: {"category": "ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ", "details": {"show_name": {"value": [], "pvalues": ["Ο Μάγος του Οζ", "Η Παναγία των Παρισίων", "Το Τέρας της Λίμνης", "Η Καλύβα του Μπαρμπα-Θωμά", "Το Μυστικό της Αλίκης", "Ο Θησαυρός της Βαγδάτης", "Η Κωμωδία των Παρεξηγήσεων", "Ο Βυσσινόκηπος"]}, "no_of_people": {"value": [], "pvalues": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, "age": {"value": [], "pvalues": ["< 18", "> 18", "> 65"]}, "date": {"value": ["Τρίτη"], "pvalues": ["Δευτέρα", "Τρίτη", "Τετάρτη", "Πέμπτη", "Παρασκευή", "Σάββατο", "Κυριακή"]}, "discount": {"value": "", "pvalues": ["5%", "10%", "15%", "20%", "25%", "30%", "35%", "40%", "50%"]}, "code": {"value": "", "pvalues": []}}, "error": null}
  JSON FIELDS: java.util.LinkedHashMap$LinkedKeyIterator@6cd9196
  CATEGORY FROM SERVER: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Handling conversation turn for node: discount_confirmation
  DEBUG: Processing JSON response to populate template
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 0
  DEBUG: Template is complete - All fields populated
  DEBUG: For ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ category - Template has SOME information available
  DEBUG: Should navigate to: discount_some
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: 
  DEBUG: Template populated from JSON - Type: DiscountTemplate, Missing fields count: 0
  DEBUG: Template is complete! All fields populated successfully.
  TEMPLATE APPLIED: ημερομηνία: Τρίτη, <sep> σωστα;
  DEBUG: First process result: true
  DEBUG: Handling node transition for node discount_confirmation
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  Initial JSON processing complete, template populated
  Navigation debug - Original user input: 'ναι', Server category: 'ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ'
  DEBUG: Choosing next node with actual user input: ναι
  DEBUG: Stored user message: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Current node ID: discount_confirmation, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Available children count: 1
  DEBUG: Available child nodes for matching:
  DEBUG:   - ID: discount_complete, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Path length: 3
  DEBUG: Path from root to current node: 
  DEBUG:   - root (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG:   - prosfores_ekptoseis (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG:   - discount_confirmation (ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ)
  DEBUG: isConfirmation: true, isRejection: false
  DEBUG: At confirmation node: discount_confirmation
  DEBUG: At confirmation node with YES - going to root
  DEBUG: Found child with matching category: discount_complete
  DEBUG: Selected next node: discount_complete, handling state transition
  DEBUG: Both nodes have templates, attempting merge from discount_confirmation to discount_complete
  DEBUG: Merging template data from DiscountTemplate
  DEBUG: Merge successful: true
  DEBUG: Handling node transition for node discount_complete
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  Navigation successful - Moving from 'discount_confirmation' to 'discount_complete'
  DEBUG: Handling conversation turn for node: discount_complete
  DEBUG: Processing JSON response to populate template
  DEBUG: Template populated: true
  DEBUG: After JSON population - Missing fields: 0
  DEBUG: Template is complete - All fields populated
  DEBUG: For ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ category - Template has SOME information available
  DEBUG: Should navigate to: discount_some
  DEBUG: Processing message with state: INITIAL
  DEBUG: Current node: discount_complete, Category: ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ
  DEBUG: Processing message with INITIAL state
  DEBUG: Current template before processing: DiscountTemplate
  DEBUG: Missing fields: 
  DEBUG: Template populated from JSON - Type: DiscountTemplate, Missing fields count: 0
  DEBUG: Template is complete! All fields populated successfully.
  TEMPLATE APPLIED: <results>.<sep>Πατήστε οτιδήποτε για να επιστρέψετε στην αρχική κατάσταση!
  DEBUG: First process result: true
  DEBUG: Handling node transition for node discount_complete
  DEBUG: Current state: INITIAL
  DEBUG: State unchanged: INITIAL
  DEBUG: Current state after transition: INITIAL
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Δευτέρα]
  matchesTemplate: Comparing record value 'Δευτέρα' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Τρίτη]
  matchesTemplate: Comparing record value 'Τρίτη' with template value 'Τρίτη'
  matchesTemplate: EXACT MATCH FOUND for field 'date'
  matchesTemplate: Checking field 'show_name' with values: [Ο Μάγος του Οζ]
  matchesTemplate: Record values for field 'show_name': [Η Παναγία των Παρισίων]
  matchesTemplate: Comparing record value 'Η Παναγία των Παρισίων' with template value 'Ο Μάγος του Οζ'
  matchesTemplate: NO MATCH found for field 'show_name' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Τετάρτη]
  matchesTemplate: Comparing record value 'Τετάρτη' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Πέμπτη]
  matchesTemplate: Comparing record value 'Πέμπτη' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Παρασκευή]
  matchesTemplate: Comparing record value 'Παρασκευή' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Σάββατο]
  matchesTemplate: Comparing record value 'Σάββατο' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Κυριακή]
  matchesTemplate: Comparing record value 'Κυριακή' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Δευτέρα]
  matchesTemplate: Comparing record value 'Δευτέρα' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Τρίτη]
  matchesTemplate: Comparing record value 'Τρίτη' with template value 'Τρίτη'
  matchesTemplate: EXACT MATCH FOUND for field 'date'
  matchesTemplate: Checking field 'show_name' with values: [Ο Μάγος του Οζ]
  matchesTemplate: Record values for field 'show_name': [Ο Μάγος του Οζ]
  matchesTemplate: Comparing record value 'Ο Μάγος του Οζ' with template value 'Ο Μάγος του Οζ'
  matchesTemplate: EXACT MATCH FOUND for field 'show_name'
  matchesTemplate: Checking field 'no_of_people' with values: [1]
  matchesTemplate: Record values for field 'no_of_people': [9]
  matchesTemplate: Comparing record value '9' with template value '1'
  compareNumberOfPeopleFields: Comparing record '9' with template '1'
  compareNumberOfPeopleFields: 9 <= 1: false
  matchesTemplate: NO MATCH found for field 'no_of_people' - record rejected
  matchesTemplate: Starting comparison with criteria: {date=[Τρίτη], show_name=[Ο Μάγος του Οζ], no_of_people=[1], age=[< 18]}
  matchesTemplate: Checking field 'date' with values: [Τρίτη]
  matchesTemplate: Record values for field 'date': [Τετάρτη]
  matchesTemplate: Comparing record value 'Τετάρτη' with template value 'Τρίτη'
  matchesTemplate: NO MATCH found for field 'date' - record rejected
  Conversation turn processed for node: discount_complete
  Current state: INITIAL
  Using system message from node: discount_complete
  Combined  Δεν βρέθηκαν αποτελέσματα που να ταιριάζουν με τα κριτήρια σας..<sep>Πατήστε οτιδήποτε για να επιστρέψετε στην αρχική κατάσταση!
  Current Node: ChatbotNode{
    id='discount_complete',
    category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ',
    type='EXTRACT',
    message1='Ορισμένες προσφορές που ισχύουν είναι:',
    message2='<results>.<sep>Πατήστε οτιδήποτε για να επιστρέψετε στην αρχική κατάσταση!',
    systemMessage=SystemMessage{category='ΠΡΟΣΦΟΡΕΣ & ΕΚΠΤΩΣΕΙΣ', details={"show_name":{"value":[],"pvalues":["Ο Μάγος του Οζ","Η Παναγία των Παρισίων","Το Τέρας της Λίμνης","Η Καλύβα του Μπαρμπα-Θωμά","Το Μυστικό της Αλίκης","Ο Θησαυρός της Βαγδάτης","Η Κωμωδία των Παρεξηγήσεων","Ο Βυσσινόκηπος"]},"no_of_people":{"value":[],"pvalues":[1,2,3,4,5,6,7,8,9,10]},"age":{"value":[],"pvalues":["< 18","> 18","> 65"]},"date":{"value":["Τρίτη"],"pvalues":["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"]},"discount":{"value":"","pvalues":["5%","10%","15%","20%","25%","30%","35%","40%","50%"]},"code":{"value":"","pvalues":[]}}, error='null', type=2},
    userMessage=null,
    content='',
    fallback='Οι προσφορές που αναφέρθηκαν ισχύουν με την επίδειξη κατάλληλης ταυτότητας κατά την είσοδο.',
    childrenCount=1,
    parent=discount_confirmation,
    pendingChildIds=[],
    msgTemplate=DiscountTemplate{showName=[Ο Μάγος του Οζ], numberOfPeople=[1], age=[< 18], date=[Τρίτη], possibleAgeCategories=[< 18, > 18, > 65]}
  }